<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Sample_GoogleMap</title>

    <script src="http://maps.google.com/maps/api/js?key=AIzaSyC35_MBRS8sEO3YOCUJFHJjnc7SpB_OQhs&language=ja"></script>

    <style>
        html {
            height: 100%
        }

        body {
            height: 100%
        }

        #map {
            height: 100%;
            width: 100%
        }

    </style>
</head>

<body>
    <div id="map"></div>

    <script>
        // ユーザーの端末がGeoLocation APIに対応しているかの判定
        // 対応している場合
        if (navigator.geolocation) {
            // 現在地を取得
            var myPos = {};
            var myPos = {};
            var myPos = {};
            var myPos = {};
            navigator.geolocation.getCurrentPosition(

                // [第1引数] 取得に成功した場合の関数
                function(position) {
                    /* -------------------- My Info Set -------------------- */
                    // 取得データの整理
                    myData = position.coords;
                    // 自分のデータの整理
                    myPos['lat'] = myData.latitude;              // 緯度
                    myPos['lng'] = myData.longitude;             // 経度

                    // 未使用
                    // myPos['alt'] = myData.altitude;              // 高度
                    // myPos['accLatlng'] = myData.accuracy;        // 緯度経度の精度
                    // myPos['accAlt'] = myData.altitudeAccuracy;   // 高度の精度
                    // myPos['heading'] = myData.heading; // 地図の角度 default 0=北,90=東,180=南,270=西
                    // myPos['speed'] = myData.speed;     // ??

                    // 自分のピンを立てる処理
                    var myLatLng = new google.maps.LatLng(myPos['lat'], myPos['lng']); // 地図の中心座標

                    var Options = {
                        zoom: 15,             // 地図の縮尺値
                        center: myLatLng,     // 地図の中心座標
                        mapTypeId: 'roadmap'  // 地図の種類
                    };

                    // 共通設定
                    var map = new google.maps.Map(document.getElementById('map'), Options);

                    var myMarker = new google.maps.Marker({
                        position: myLatLng,
                        map: map
                    });
                    // 吹き出しコメントを設定
                    var myInfoWindow = new google.maps.InfoWindow({
                        content: "アイエエエ！！！ニンジャ！？"
                    });
                    // 吹き出しを開く
                    myInfoWindow.open(map, myMarker);
                    /* -------------------- My Info Set -------------------- */

                    /*
                       firestore 接続
                    */
                    // 登録済みの位置データを取得



                    // マーカー共通設定
                    // 吹き出しが閉じられたら、マーカークリックで再び開くようにしておく
                    google.maps.event.addListener(myInfoWindow, "closeclick", function() {
                        google.maps.event.addListenerOnce(myMarker, "click", function(event) {
                            myInfoWindow.open(map, myMarker);
                        });
                    });
                }
            )
        }
    </script>

    <script src="scripts/mapaip.js"></script>
</body>
</html>
